<mxfile host="app.diagrams.net" modified="2021-09-19T09:06:56.830Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.82 Safari/537.36" etag="foZFLuOOwUXm-Nkz0JxQ" version="15.2.9" type="github">
  <diagram id="4S8dutFwa6XmwHRQU8MG" name="Page-1">
    <mxGraphModel dx="2013" dy="518" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-22" value="" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-10" y="355" width="310" height="355" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-1" target="i-K0xPWOGxYHL6_mFFYi-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-1" target="i-K0xPWOGxYHL6_mFFYi-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-1" value="lock" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="240" y="110" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-93" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-2" target="i-K0xPWOGxYHL6_mFFYi-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-2" value="FairSync.lock" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="120" y="200" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="C8te3wHDB1y1W89r1crv-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="i-K0xPWOGxYHL6_mFFYi-4" target="C8te3wHDB1y1W89r1crv-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-4" value="NonFairSync.lock&lt;br&gt;default" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="340" y="200" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.65;entryY=0.002;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-6" target="i-K0xPWOGxYHL6_mFFYi-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-6" value="AQS.acquire(1);" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="120" y="280" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-7" target="i-K0xPWOGxYHL6_mFFYi-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-7" target="i-K0xPWOGxYHL6_mFFYi-25" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="340" y="395" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-7" value="FairSync.tryAcquire(1)" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="120" y="370" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-8" target="i-K0xPWOGxYHL6_mFFYi-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-15" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="i-K0xPWOGxYHL6_mFFYi-12" vertex="1" connectable="0">
          <mxGeometry x="-0.12" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-8" target="i-K0xPWOGxYHL6_mFFYi-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-14" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="i-K0xPWOGxYHL6_mFFYi-13" vertex="1" connectable="0">
          <mxGeometry x="-0.44" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-8" value="获取锁成功" style="shape=rhombus;html=1;dashed=0;whitespace=wrap;perimeter=rhombusPerimeter;" parent="1" vertex="1">
          <mxGeometry x="155" y="460" width="60" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-76" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.65;entryY=-0.02;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-10" target="i-K0xPWOGxYHL6_mFFYi-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-10" value="addWaiter&lt;br&gt;【1非空队列 追加链表尾部&lt;br&gt;2 空队列:[构建个头节点，追加到链尾部]】" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="71.25" y="560" width="227.5" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-11" value="返回" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-10" y="460" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-79" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.581;entryY=0.004;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-16" target="i-K0xPWOGxYHL6_mFFYi-78" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-16" value="acquireQueued&lt;br&gt;开始自旋获取锁" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="120" y="660" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-20" value="特点 不入队&lt;br&gt;直接cas获取" style="shape=document;whiteSpace=wrap;html=1;boundedLbl=1;dashed=0;flipH=1;" parent="1" vertex="1">
          <mxGeometry x="480" y="200" width="100" height="70" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-25" target="i-K0xPWOGxYHL6_mFFYi-27" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="450" y="430" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-28" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="i-K0xPWOGxYHL6_mFFYi-26" vertex="1" connectable="0">
          <mxGeometry x="-0.425" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-25" target="i-K0xPWOGxYHL6_mFFYi-38" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="450" y="463" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-25" value="state == 0" style="shape=rhombus;html=1;dashed=0;whitespace=wrap;perimeter=rhombusPerimeter;" parent="1" vertex="1">
          <mxGeometry x="340" y="370" width="60" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-27" target="i-K0xPWOGxYHL6_mFFYi-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-33" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="i-K0xPWOGxYHL6_mFFYi-30" vertex="1" connectable="0">
          <mxGeometry x="-0.2" y="4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-27" target="i-K0xPWOGxYHL6_mFFYi-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-27" value="Thread&amp;nbsp;&lt;br&gt;is 独占锁线程" style="shape=rhombus;html=1;dashed=0;whitespace=wrap;perimeter=rhombusPerimeter;" parent="1" vertex="1">
          <mxGeometry x="580" y="370" width="150" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-29" value="state++;&lt;br&gt;可以加锁返回true" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="605" y="460" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-31" value="不是【重入】&lt;br&gt;返回false" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="720" y="460" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-38" target="i-K0xPWOGxYHL6_mFFYi-45" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-47" value="有" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="i-K0xPWOGxYHL6_mFFYi-46" vertex="1" connectable="0">
          <mxGeometry x="-0.3" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-38" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="477.5" y="780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-49" value="没有" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="i-K0xPWOGxYHL6_mFFYi-48" vertex="1" connectable="0">
          <mxGeometry x="-0.52" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-38" value="" style="shape=rhombus;html=1;dashed=0;whitespace=wrap;perimeter=rhombusPerimeter;" parent="1" vertex="1">
          <mxGeometry x="305" y="460" width="345" height="270" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-43" target="i-K0xPWOGxYHL6_mFFYi-60" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-63" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-43" target="i-K0xPWOGxYHL6_mFFYi-56" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-43" value="队列是否有等待线程" style="shape=ellipse;html=1;dashed=0;whitespace=wrap;perimeter=ellipsePerimeter;" parent="1" vertex="1">
          <mxGeometry x="421.25" y="490" width="112.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-45" value="加锁失败&lt;br&gt;返回false" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="690" y="570" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-50" target="i-K0xPWOGxYHL6_mFFYi-51" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-55" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-50" target="i-K0xPWOGxYHL6_mFFYi-53" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-50" value="cas" style="shape=rhombus;html=1;dashed=0;whitespace=wrap;perimeter=rhombusPerimeter;" parent="1" vertex="1">
          <mxGeometry x="448" y="780" width="60" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-51" value="甚至独占线程&lt;br&gt;加锁成功返回true" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="428" y="870" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-53" value="加锁失败&lt;br&gt;返回false" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="550" y="780" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-67" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-56" target="i-K0xPWOGxYHL6_mFFYi-38" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="428" y="600" as="targetPoint" />
            <Array as="points">
              <mxPoint x="428" y="670" />
              <mxPoint x="478" y="670" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-56" value="头==尾&lt;br&gt;表示没有" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="400" y="550" width="56" height="30" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-70" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-60" target="i-K0xPWOGxYHL6_mFFYi-69" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-60" value="头!=尾&lt;br&gt;表示有" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="502" y="550" width="56" height="30" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-71" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-69" target="i-K0xPWOGxYHL6_mFFYi-38" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="605" y="595" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-72" value="true" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="i-K0xPWOGxYHL6_mFFYi-71" vertex="1" connectable="0">
          <mxGeometry x="-0.1467" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-73" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-69" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="480" y="730" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-74" value="false" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="i-K0xPWOGxYHL6_mFFYi-73" vertex="1" connectable="0">
          <mxGeometry x="-0.0519" y="-4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-69" value="当前线程不是链表第二个节点线程" style="shape=rhombus;html=1;dashed=0;whitespace=wrap;perimeter=rhombusPerimeter;" parent="1" vertex="1">
          <mxGeometry x="465" y="600" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-75" value="公平就体现在这里&lt;br&gt;队列没元素则没有公平非公平之说 直接尝试获取&lt;br&gt;队列有元素 则判断自己是不是最早入队&lt;br&gt;是则尝试获取&lt;br&gt;[最早入队的在index=1,而非index=0]&lt;br&gt;[最早入队的在index=1,而非index=0]&lt;br&gt;[最早入队的在index=1,而非index=0]" style="shape=cloud;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="670" y="670" width="270" height="90" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-78" value="" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-10" y="750" width="420" height="240" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-83" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-81" target="i-K0xPWOGxYHL6_mFFYi-82" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-95" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="i-K0xPWOGxYHL6_mFFYi-83" vertex="1" connectable="0">
          <mxGeometry x="-0.6" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-90" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-81" target="i-K0xPWOGxYHL6_mFFYi-91" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-94" value="不是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="i-K0xPWOGxYHL6_mFFYi-90" vertex="1" connectable="0">
          <mxGeometry x="-0.2903" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-81" value="轮到自己是不是头节点&lt;br&gt;的下一个节点" style="shape=rhombus;html=1;dashed=0;whitespace=wrap;perimeter=rhombusPerimeter;" parent="1" vertex="1">
          <mxGeometry x="20" y="760" width="115" height="70" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-86" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-82" target="i-K0xPWOGxYHL6_mFFYi-85" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-96" value="成功" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="i-K0xPWOGxYHL6_mFFYi-86" vertex="1" connectable="0">
          <mxGeometry x="-0.7333" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-92" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-82" target="i-K0xPWOGxYHL6_mFFYi-91" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-97" value="失败" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="i-K0xPWOGxYHL6_mFFYi-92" vertex="1" connectable="0">
          <mxGeometry x="-0.4667" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-82" value="尝试tryAcquire" style="shape=rhombus;html=1;dashed=0;whitespace=wrap;perimeter=rhombusPerimeter;" parent="1" vertex="1">
          <mxGeometry x="20" y="850" width="115" height="70" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-88" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-85" target="i-K0xPWOGxYHL6_mFFYi-87" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-85" value="把自己设置为头节点&lt;br&gt;node.thread = null" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="27.5" y="950" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-87" value="响应用户线程" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="70" y="1020" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-89" value="自旋" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-10" y="750" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-103" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-91" target="i-K0xPWOGxYHL6_mFFYi-102" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-106" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-91" target="i-K0xPWOGxYHL6_mFFYi-89" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-107" value="第一次不挂起" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="i-K0xPWOGxYHL6_mFFYi-106" vertex="1" connectable="0">
          <mxGeometry x="-0.5636" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-91" value="shouldParkAfterFailedAcquire&lt;br&gt;[waitStatus初始为0&lt;br&gt;后一个线程总是会把前一个设置成-1&lt;br&gt;如果是-1则应该挂起]" style="shape=rhombus;html=1;dashed=0;whitespace=wrap;perimeter=rhombusPerimeter;" parent="1" vertex="1">
          <mxGeometry x="160" y="830" width="190" height="70" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-100" value="可以看出每次cpu&lt;br&gt;自旋两次后&lt;br&gt;变转换成挂起自旋&lt;br&gt;为什么是两次:以前有大牛告诉我这是个硬件专家该考虑的事" style="shape=cloud;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="230" y="990" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-105" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-102" target="i-K0xPWOGxYHL6_mFFYi-104" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-102" value="LockSupport.park" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="205" y="920" width="105" height="20" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-109" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-104" target="i-K0xPWOGxYHL6_mFFYi-108" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-104" value="Thread.interrupted()&lt;br&gt;主要用于锁响应中断&lt;br&gt;这里不说了" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="210" y="950" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-108" value="doAcquireInterruptibly 用户一次中断 这里一次获取中断并复位&lt;br&gt;来判断是否打断自旋&amp;nbsp; &amp;nbsp;&lt;span style=&quot;text-align: center&quot;&gt;LockSupport.park会响应中断&lt;/span&gt;" style="html=1;dashed=0;whitespace=wrap;shape=mxgraph.dfd.dataStoreID;align=left;spacingLeft=3;points=[[0,0],[0.5,0],[1,0],[0,0.5],[1,0.5],[0,1],[0.5,1],[1,1]];" parent="1" vertex="1">
          <mxGeometry x="540" y="950" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-111" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-113" target="i-K0xPWOGxYHL6_mFFYi-115" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-112" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-113" target="i-K0xPWOGxYHL6_mFFYi-116" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-113" value="lock" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="193.75" y="1160" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-114" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="i-K0xPWOGxYHL6_mFFYi-115" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="123.75" y="1330" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-115" value="FairSync.lock" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="73.75" y="1250" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-116" value="NonFairSync.lock&lt;br&gt;default" style="html=1;dashed=0;whitespace=wrap;" parent="1" vertex="1">
          <mxGeometry x="293.75" y="1250" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="i-K0xPWOGxYHL6_mFFYi-117" value="总是需要通过队列进行排队&lt;br&gt;cas时无需关注队列" style="shape=document;whiteSpace=wrap;html=1;boundedLbl=1;dashed=0;flipH=1;" parent="1" vertex="1">
          <mxGeometry x="-70" y="1250" width="100" height="70" as="geometry" />
        </mxCell>
        <mxCell id="C8te3wHDB1y1W89r1crv-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="C8te3wHDB1y1W89r1crv-2" target="C8te3wHDB1y1W89r1crv-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C8te3wHDB1y1W89r1crv-7" value="成功" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="C8te3wHDB1y1W89r1crv-6">
          <mxGeometry y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="C8te3wHDB1y1W89r1crv-2" value="cas" style="shape=rhombus;html=1;dashed=0;whitespace=wrap;perimeter=rhombusPerimeter;" vertex="1" parent="1">
          <mxGeometry x="360" y="280" width="60" height="50" as="geometry" />
        </mxCell>
        <mxCell id="C8te3wHDB1y1W89r1crv-5" value="设置独占线程" style="html=1;dashed=0;whitespace=wrap;" vertex="1" parent="1">
          <mxGeometry x="480" y="280" width="100" height="50" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
